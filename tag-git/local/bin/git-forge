#!/usr/bin/env bash

set -euo pipefail

for remote in $(git remote); do
  for url in $(git remote get-url --all --push "$remote"); do
    url="${url%.git}"     # Remove `.git` suffix.
    url="${url#https://}" # Remove `https://` prefix.
    url="${url#git@}"     # Remove `git@` prefix.
    url="${url/://}"      # Replace `:` between hostname and path with `/`.
    url="https://$url"    # Add `https://` prefix.

    if [[ "$OSTYPE" == darwin* ]]; then
      open "$url"
    elif command -v xdg-open >/dev/null; then
      xdg-open "$url"
    else
      echo "$url"
    fi
  done
done
