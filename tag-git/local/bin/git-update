#!/bin/sh

set -eu

log() {
  echo "\033[1;34m$*\033[00m"
}

log "Fetching from $(git remote get-url origin)"
git fetch origin --prune

log "Checking out master"
git checkout master

log "Pulling origin/master onto master"
git pull origin master --ff-only --stat

log "Deleting merged branches"
git branch --merged | grep -v '^\*\ master$' | xargs -n 1 git branch -d
