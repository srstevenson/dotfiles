"$schema" = "https://jj-vcs.github.io/jj/latest/config-schema.json"

[user]
name = "Scott Stevenson"
email = "scott@stevenson.io"

[ui]
default-command = "log"
diff-formatter = ["difft", "--color=always", "$left", "$right"]

[templates]
draft_commit_description = '''
concat(
  coalesce(description, default_commit_description, "\n"),
  surround(
    "\nJJ: This commit contains the following changes:\n", "",
    indent("JJ:     ", diff.stat(72)),
  ),
  "\nJJ: ignore-rest\n",
  diff.git(),
)
'''
git_push_bookmark = '"srs/push-" ++ change_id.short()'

[fix.tools.bean-format]
command = ["bean-format", "-"]
patterns = ["glob:'**/*.bean'"]

[fix.tools.prettier-css]
command = ["prettier", "--parser=css", "--stdin-filepath=$path"]
patterns = ["glob:'**/*.css'"]

[fix.tools.jq]
command = ["jq", "."]
patterns = ["glob:'**/*.json'"]

[fix.tools.prettier-markdown]
command = [
  "prettier",
  "--parser=markdown",
  "--prose-wrap=always",
  "--stdin-filepath=$path",
]
patterns = ["glob:'**/*.md'"]

[fix.tools.prettier-yaml]
command = ["prettier", "--parser=yaml", "--stdin-filepath=$path"]
patterns = ["glob:'**/*.yaml'", "glob:'**/*.yml'"]

[fix.tools.ruff-check]
command = ["ruff", "check", "--fix-only", "--stdin-filename=$path", "-"]
patterns = ["glob:'**/*.py'"]

[fix.tools.ruff-format]
command = ["ruff", "format", "--stdin-filename=$path", "-"]
patterns = ["glob:'**/*.py'"]

[fix.tools.rustfmt]
command = ["rustfmt", "--emit=stdout"]
patterns = ["glob:'**/*.rs'"]

[fix.tools.shfmt]
command = ["shfmt", "--filename=$path", "--case-indent", "--indent=2", "-"]
patterns = ["glob:'**/*.sh'"]

[fix.tools.taplo]
command = ["taplo", "format", "-"]
patterns = ["glob:'**/*.toml'"]
